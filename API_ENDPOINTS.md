# Fotometry Backend API - Endpoints

## üìö Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
**URL:** http://localhost:5000/api/docs

---

## üõ∞Ô∏è Satellites - –ö–∞—Ç–∞–ª–æ–≥ TLE

### 1. –ü–æ–∏—Å–∫ —Å–ø—É—Ç–Ω–∏–∫–æ–≤ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ
```
GET /api/v1/satellites/catalog/search?query={–Ω–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ NORAD ID}
```
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–∏—Å–∫ —Å–ø—É—Ç–Ω–∏–∫–æ–≤ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ NORAD –Ω–æ–º–µ—Ä—É (–º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞)

**–ü—Ä–∏–º–µ—Ä—ã:**
- –ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é: `?query=ISS`
- –ü–æ –Ω–æ–º–µ—Ä—É: `?query=25544`
- –ü–æ —á–∞—Å—Ç–∏—á–Ω–æ–º—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é: `?query=Star` (–Ω–∞–π–¥–µ—Ç Starlink)

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "total": 8,
  "satellites": [
    {
      "name": "ISS (ZARYA)",
      "noradId": "25544",
      "line1": "1 25544U 98067A...",
      "line2": "2 25544  51.6329...",
      "inclination": 51.6329,
      "raan": 206.2777,
      "eccentricity": 0.0004341,
      ...
    }
  ]
}
```

### 2. –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ NORAD ID
```
GET /api/v1/satellites/catalog/{noradId}
```
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å TLE –¥–∞–Ω–Ω—ã–µ –∏ –æ—Ä–±–∏—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞

**–ü—Ä–∏–º–µ—Ä:** `/api/v1/satellites/catalog/25544`

---

## üóÑÔ∏è Satellites - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### 3. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å–ø—É—Ç–Ω–∏–∫–∏ –∏–∑ –ë–î
```
GET /api/v1/satellites
```
**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–ø–∏—Å–æ–∫ —Å–ø—É—Ç–Ω–∏–∫–æ–≤, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### 4. –ù–∞–π—Ç–∏ —Å–ø—É—Ç–Ω–∏–∫ –≤ –ë–î –ø–æ NORAD ID
```
GET /api/v1/satellites/norad/{noradId}
```
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–∏—Å–∫ —Å–ø—É—Ç–Ω–∏–∫–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### 5. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ø—É—Ç–Ω–∏–∫ —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
```
POST /api/v1/satellites/norad/{noradId}/sync
```
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö –∫–∞—Ç–∞–ª–æ–≥–æ–≤ (N2YO, Celestrak)

### 6. –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–ø—É—Ç–Ω–∏–∫–µ –ø–æ ID
```
GET /api/v1/satellites/{id}
```
**–û–ø–∏—Å–∞–Ω–∏–µ:** –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–ø—É—Ç–Ω–∏–∫–µ –∏–∑ –ë–î

### 7. –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å–ø—É—Ç–Ω–∏–∫–∞
```
GET /api/v1/satellites/{id}/position?time={ISO –≤—Ä–µ–º—è}
```
**–û–ø–∏—Å–∞–Ω–∏–µ:** –†–∞—Å—á–µ—Ç –ø–æ–ª–æ–∂–µ–Ω–∏—è —Å–ø—É—Ç–Ω–∏–∫–∞ –Ω–∞ –æ—Ä–±–∏—Ç–µ

### 8. –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç—å —Å–ø—É—Ç–Ω–∏–∫–∞
```
GET /api/v1/satellites/{id}/visibility?lat={—à–∏—Ä–æ—Ç–∞}&lon={–¥–æ–ª–≥–æ—Ç–∞}&alt={–≤—ã—Å–æ—Ç–∞}&time={–≤—Ä–µ–º—è}
```
**–û–ø–∏—Å–∞–Ω–∏–µ:** –†–∞—Å—á–µ—Ç –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Å–ø—É—Ç–Ω–∏–∫–∞ —Å —Ç–æ—á–∫–∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è

---

## üì• Ingest - –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

### 9. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª –Ω–∞–±–ª—é–¥–µ–Ω–∏—è
```
POST /api/v1/ingest/file
```
**Content-Type:** multipart/form-data

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `file` - —Ñ–∞–π–ª –Ω–∞–±–ª—é–¥–µ–Ω–∏—è (.E)
- `satelliteData` - JSON —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Å–ø—É—Ç–Ω–∏–∫–∞ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `position` - JSON —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `source` - –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ü—Ä–∏–º–µ—Ä satelliteData:**
```json
{
  "name": "ISS (ZARYA)",
  "noradId": "25544",
  "line1": "1 25544U 98067A   25261.15495302  .00009099  00000-0  16508-3 0  9995",
  "line2": "2 25544  51.6329 206.2777 0004341 352.6018   7.4906 15.50367586529587"
}
```

### 10. –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
```
POST /api/v1/ingest/json
```

### 11. –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—É—é –ø—Ä–æ–≤–æ–¥–∫—É –ø–æ –Ω–æ–º–µ—Ä—É –ö–ê
```
GET /api/v1/ingest/satellite/{satelliteNumber}?date={–¥–∞—Ç–∞}
```

### 12. –ü–æ–ª—É—á–∏—Ç—å –ø–∞—Ä—Ç–∏—Ü–∏–∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è
```
GET /api/v1/ingest/satellite/{satelliteNumber}/partitions?date={–¥–∞—Ç–∞}
```

### 13. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ö–ê
```
GET /api/v1/ingest/satellites
```

---

## üî≠ Observations - –ù–∞–±–ª—é–¥–µ–Ω–∏—è

### 14. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π
```
GET /api/v1/observations?page={1}&limit={10}&pointCode={–∫–æ–¥}&dateFrom={–¥–∞—Ç–∞}&dateTo={–¥–∞—Ç–∞}
```

### 15. –ü–æ–ª—É—á–∏—Ç—å –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ –ø–æ ID
```
GET /api/v1/observations/{id}
```

### 16. –£–¥–∞–ª–∏—Ç—å –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ
```
DELETE /api/v1/observations/{id}
```

### 17. –ü–æ–ª—É—á–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–∞–±–ª—é–¥–µ–Ω–∏—è
```
GET /api/v1/observations/{id}/coordinates
```

### 18. –ü–æ–ª—É—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –Ω–∞–±–ª—é–¥–µ–Ω–∏—è
```
GET /api/v1/observations/{id}/filters
```

### 19. –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª–∏ –ø–æ —Ñ–∏–ª—å—Ç—Ä—É
```
GET /api/v1/observations/{id}/filters/{code}
```

### 20. –ü–æ–ª—É—á–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã
```
GET /api/v1/observations/{id}/filters/{code}/series?type={raw|instrumental|averaged}
```

### 21. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–µ –ø–∏–∫–∏
```
GET /api/v1/observations/{id}/filters/{code}/spectra
```

---

## üìä Analytics - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

### 22. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ñ–∏–ª—å—Ç—Ä–∞–º
```
GET /api/v1/analytics/filters
```

### 23. –°–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–µ –ø–∏–∫–∏
```
GET /api/v1/analytics/spectra?filterCode={–∫–æ–¥}
```

### 24. –°–≤–æ–¥–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```
GET /api/v1/analytics/stats
```

### 25. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–≤–µ–∑–¥–Ω—ã—Ö –≤–µ–ª–∏—á–∏–Ω
```
GET /api/v1/analytics/magnitudes?filterCode={–∫–æ–¥}
```

---

## üîÑ Workflow –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è:

1. **–ü–æ–∏—Å–∫ —Å–ø—É—Ç–Ω–∏–∫–∞ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ:**
   ```
   GET /api/v1/satellites/catalog/search?query=ISS
   ```

2. **–ü–æ–ª—É—á–µ–Ω–∏–µ TLE –¥–∞–Ω–Ω—ã—Ö:**
   ```
   GET /api/v1/satellites/catalog/25544
   ```

3. **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è:**
   ```
   POST /api/v1/ingest/file
   ```
   - –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª
   - –ü–µ—Ä–µ–¥–∞—Ç—å satelliteData –∏–∑ —à–∞–≥–∞ 2
   - –ü–µ—Ä–µ–¥–∞—Ç—å position —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è

4. **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –°–ø—É—Ç–Ω–∏–∫ —Å–æ–∑–¥–∞–Ω/–æ–±–Ω–æ–≤–ª–µ–Ω –≤ –ë–î
   - –ù–∞–±–ª—é–¥–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –∏ —Å–≤—è–∑–∞–Ω–æ —Å–æ —Å–ø—É—Ç–Ω–∏–∫–æ–º
   - –í—ã—á–∏—Å–ª–µ–Ω—ã –æ—Ä–±–∏—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

---

## üîç –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –ü–æ–∏—Å–∫ –ú–ö–° –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:
```bash
# –®–∞–≥ 1: –ü–æ–∏—Å–∫
curl "http://localhost:5000/api/v1/satellites/catalog/search?query=ISS"

# –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ TLE
curl "http://localhost:5000/api/v1/satellites/catalog/25544"

# –®–∞–≥ 3: –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è
curl -X POST "http://localhost:5000/api/v1/ingest/file" \
  -F "file=@observation.E" \
  -F 'satelliteData={"name":"ISS (ZARYA)","noradId":"25544","line1":"...","line2":"..."}' \
  -F 'position={"lat":55.75,"lon":37.62,"alt":0}' \
  -F 'source=Ground Station 1'
```

### –ü–æ–∏—Å–∫ Starlink —Å–ø—É—Ç–Ω–∏–∫–æ–≤:
```bash
curl "http://localhost:5000/api/v1/satellites/catalog/search?query=Starlink"
# –í–µ—Ä–Ω–µ—Ç 8000+ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```

### –†–∞—Å—á–µ—Ç –ø–æ–ª–æ–∂–µ–Ω–∏—è –ú–ö–°:
```bash
curl "http://localhost:5000/api/v1/satellites/1/position"
```

---

## ‚úÖ –°—Ç–∞—Ç—É—Å

- ‚úÖ –ü–æ—Ä—Ç: **5000**
- ‚úÖ Swagger: http://localhost:5000/api/docs
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: PostgreSQL (45.12.73.86:5432)
- ‚úÖ –ö–∞—Ç–∞–ª–æ–≥ TLE: catsat18092025.txt (**–∑–∞–≥—Ä—É–∂–µ–Ω**)
- ‚úÖ –í—Å–µ endpoints –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç

